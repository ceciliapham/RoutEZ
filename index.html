<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Website Heading hello</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <!-- Leaflet JavaScript -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- Google Maps Places API -->
  <!--routing machine API-->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
  <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

  <style>
    #map {
      height: 400px;
    }
  </style>
</head>

<body class="mx-auto" style="width: 800px;">
  <h1 class="pt-5"type = h1 style="text-align: center;">RouteEZ</h1>
  <p style="text-align: center;">DavisHacks2023</p>

  <div class="container">
    <!-- Autocomplete location search inputs -->
    <div class="form-group">
      <label for="from_input">From:</label>
      <input type="text" class="form-control" id="from_input" placeholder="Type address..." />
      <input type="hidden" id="from_lat" />
      <input type="hidden" id="from_lng" />
    </div>
    <div class="form-group">
      <label for="to_input">To:</label>
      <input type="text" class="form-control" id="to_input" placeholder="Type address..." />
      <input type="hidden" id="to_lat" />
      <input type="hidden" id="to_lng" />
    </div>
    <button type="button" class="btn btn-primary" id="submit_button">Click for Directions</button>
  </div>

  <p class="pt-5" type = h1>Interactive Map</p>
  <div id="map" style="text-align: center;" ></div>

  <script>
    $(document).ready(function () {
      var fromInput = document.getElementById('from_input');
      var toInput = document.getElementById('to_input');
      var submitButton = document.getElementById('submit_button');
      var map = L.map('map').setView([37.871, -122.272], 13);

      // Create Leaflet tile layer
      L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 100,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
      }).addTo(map);

      // Autocomplete for "From" input
      var fromAutocomplete = new google.maps.places.Autocomplete(fromInput, {
        types: ['geocode'],
        componentRestrictions: {
          country: 'USA'
        }
      });

      // Autocomplete for "To" input
      var toAutocomplete = new google.maps.places.Autocomplete(toInput, {
        types: ['geocode'],
        componentRestrictions: {
          country: 'USA'
        }
      });

      // Get latitude and longitude when place changes for "From" input
      google.maps.event.addListener(fromAutocomplete, 'place_changed', function () {
        var place = fromAutocomplete.getPlace();
        document.getElementById('from_lat').value = place.geometry.location.lat();
        document.getElementById('from_lng').value = place.geometry.location.lng();
      });

      // Get latitude and longitude when place changes for "To" input
      google.maps.event.addListener(toAutocomplete, 'place_changed', function () {
        var place = toAutocomplete.getPlace();
        document.getElementById('to_lat').value = place.geometry.location.lat();
        document.getElementById('to_lng').value = place.geometry.location.lng();
      });

      // Handle click event for the submit button
      submitButton.addEventListener('click', function () {
        var fromLat = document.getElementById('from_lat').value;
        var fromLng = document.getElementById('from_lng').value;
        var toLat = document.getElementById('to_lat').value;
        var toLng = document.getElementById('to_lng').value;

        // Perform the directions calculation using the latitudes and longitudes
        // You can use the values from fromLat, fromLng, toLat, and toLng to calculate the directions
        // Here, we simply log the values to the console
        console.log('From Latitude:', fromLat);
        console.log('From Longitude:', fromLng);
        console.log('To Latitude:', toLat);
        console.log('To Longitude:', toLng);

        L.Routing.control({
        waypoints: [
          L.latLng(fromLat, fromLng),
          L.latLng(toLat, toLng)
        ]
      }).addTo(map);
      });
    }
    
    
    );
  </script>
  
</body>
</html>
